<ApplicationProfile>
 	<namespaces>
  		<namespace ID="rdf"><![CDATA[http://www.w3.org/1999/02/22-rdf-syntax-ns#]]></namespace>
  		<namespace ID="iot"><![CDATA[http://www.arces.unibo.it/IoTGateway#]]></namespace>
  		<namespace ID="rdfs"><![CDATA[http://www.w3.org/2000/01/rdf-schema#]]></namespace>
  	</namespaces>
  	<deletes>
  		<delete ID="MP_MAPPING">
  			<forcedBindings>
    			<binding name="?mapping" value="" type="URI"/>
    		</forcedBindings>
    		<![CDATA[DELETE { ?mapping ?p ?o } WHERE { ?mapping rdf:type iot:MP-Mapping . ?mapping ?p ?o }]]></delete>
    	<delete ID="MN_MAPPING">
    		<forcedBindings>
    			<binding name="?mapping" value="" type="URI"/>
    		</forcedBindings>
    		<![CDATA[DELETE { ?mapping ?p ?o } WHERE { ?mapping rdf:type iot:MN-Mapping . ?mapping ?p ?o }]]></delete>
    	<delete ID="RESOURCE_PENDING_REQUEST">
    		<forcedBindings>
    			<binding name="?request" value="" type="URI"/>
    		</forcedBindings>
    		<![CDATA[DELETE { ?request ?p ?o } WHERE { ?request rdf:type iot:Resource-Pending-Request . ?request ?p ?o }]]></delete>
    	<delete ID="MP_RESPONSE_AND_REQUEST">
    		<forcedBindings>
    			<binding name="?request" value="" type="URI"/>
    		</forcedBindings>
	    	<![CDATA[
	    	DELETE { ?request iot:hasMPResponse ?response . 
	      		?response rdf:type iot:MP-Response . 
	      		?response iot:hasMPResponseString ?responseValue . 
	      		?request rdf:type iot:MP-Request . 
	      		?request iot:hasProtocol ?protocol . 
	      		?request iot:hasMPRequestString ?requestValue } 
	    	WHERE { ?request iot:hasMPResponse ?response . 
	      		?response rdf:type iot:MP-Response . 
	      		?response iot:hasMPResponseString ?responseValue . 
	      		?request rdf:type iot:MP-Request . 
	      		?request iot:hasProtocol ?protocol . 
	      		?request iot:hasMPRequestString ?requestValue
	      		 }]]>
    	</delete>
    	<delete ID="RESOURCE_RESPONSE">
    		<forcedBindings>
    			<binding name="?response" value="" type="URI"/>
    		</forcedBindings>
    		<![CDATA[DELETE { ?response ?p ?o } WHERE { ?response rdf:type iot:Resource-Response . ?response ?p ?o }]]></delete>
    	<delete ID="RESOURCE_REQUEST">
    		<forcedBindings>
    			<binding name="?request" value="" type="URI"/>
    		</forcedBindings>
    		<![CDATA[DELETE { ?request ?p ?o } WHERE { ?request rdf:type iot:Resource-Request . ?request ?p ?o }]]></delete>
    	<delete ID="MN_RESPONSE">
    		<forcedBindings>
    			<binding name="?response" value="" type="URI"/>
    		</forcedBindings>
    		<![CDATA[DELETE { ?response ?p ?o } WHERE { ?response rdf:type iot:MN-Response . ?response ?p ?o }]]></delete>
    	<delete ID="ALL"><![CDATA[DELETE { ?s ?p ?o } WHERE { ?s ?p ?o }]]></delete>
    	<delete ID="MN_REQUEST">
    		<forcedBindings>
    			<binding name="?request" value="" type="URI"/>
    		</forcedBindings>
    		<![CDATA[DELETE { ?request ?p ?o } WHERE { ?request rdf:type iot:MN-Request . ?request ?p ?o }]]></delete>
    	<delete ID="RESOURCE">
    		<forcedBindings>
    			<binding name="?resource" value="" type="URI"/>
    		</forcedBindings>
    		<![CDATA[DELETE { ?resource ?p ?o } WHERE { ?resource rdf:type iot:Resource . ?resource ?p ?o }]]></delete>
  	</deletes>
  	<inserts>
  		<insert ID="RESOURCE">
    		<forcedBindings>
    			<binding name="?resource" value="" type="URI"/>
    		</forcedBindings>
      		<![CDATA[INSERT DATA { ?resource rdf:type iot:Resource }]]>
    	</insert>
    	<insert ID="MP_REQUEST">
    		<forcedBindings>
    			<binding name="?protocol" value="" type="URI"/>
    			<binding name="?request" value="" type="URI"/>
    			<binding name="?value" value="" type="literal"/>
    		</forcedBindings>
      		<![CDATA[INSERT DATA { 
      		?request rdf:type iot:MP-Request . 
      		?request iot:hasProtocol ?protocol . 
      		?request iot:hasMPRequestString ?value }]]>
    	</insert>
    	<insert ID="MN_RESPONSE">
    		<forcedBindings>
    			<binding name="?network" value="" type="URI"/>
    			<binding name="?response" value="" type="URI"/>
    			<binding name="?value" value="" type="literal"/>
    		</forcedBindings>
      		<![CDATA[INSERT DATA { 
      		?response rdf:type iot:MN-Response . 
      		?response iot:hasNetwork ?network . 
      		?response iot:hasMNResponseString ?value }]]>
    	</insert>
    	<insert ID="MN_MAPPING">
			<forcedBindings>
    			<binding name="?mapping" value="" type="URI"/>
    			<binding name="?network" value="" type="URI"/>
    			<binding name="?resource" value="" type="URI"/>
    			<binding name="?action" value="" type="URI"/>
    			<binding name="?value" value="" type="literal"/>
    			<binding name="?requestPattern" value="" type="literal"/>
    			<binding name="?responsePattern" value="" type="literal"/>
    		</forcedBindings>
      		<![CDATA[INSERT DATA { 
      		?mapping rdf:type iot:MN-Mapping . 
      		?mapping iot:hasNetwork ?network . 
      		?mapping iot:hasResource ?resource . 
      		?mapping iot:hasAction ?action . 
      		?mapping iot:hasValue ?value . 
      		?mapping iot:hasMNRequestPattern ?requestPattern . 
      		?mapping iot:hasMNResponsePattern ?responsePattern }]]>
    	</insert>	
    	<insert ID="MP_MAPPING">
    		<forcedBindings>
    			<binding name="?mapping" value="" type="URI"/>
    			<binding name="?protocol" value="" type="URI"/>
    			<binding name="?resource" value="" type="URI"/>
    			<binding name="?action" value="" type="URI"/>
    			<binding name="?value" value="" type="literal"/>
    			<binding name="?requestPattern" value="" type="literal"/>
    			<binding name="?responsePattern" value="" type="literal"/>
    		</forcedBindings>
     		 <![CDATA[INSERT DATA { 
     		 ?mapping rdf:type iot:MP-Mapping . 
     		 ?mapping iot:hasProtocol ?protocol . 
     		 ?mapping iot:hasResource ?resource . 
     		 ?mapping iot:hasAction ?action . 
     		 ?mapping iot:hasValue ?value . 
     		 ?mapping iot:hasMPRequestPattern ?requestPattern . 
     		 ?mapping iot:hasMPResponsePattern ?responsePattern }]]>
    	</insert>	
    	<insert ID="RESOURCE_PENDING_REQUEST">
    		<forcedBindings>
    			<binding name="?request" value="" type="URI"/>
    			<binding name="?action" value="" type="URI"/>
    			<binding name="?resource" value="" type="URI"/>
    			<binding name="?value" value="" type="literal"/>
    		</forcedBindings>
      		<![CDATA[INSERT DATA { 
      		?request rdf:type iot:Resource-Pending-Request . 
      		?request iot:hasValue ?value . 
      		?request iot:hasAction ?action . 
      		?request iot:hasResource ?resource }]]>
    	</insert>
    	<insert ID="MP_RESPONSE">
    		<forcedBindings>
    			<binding name="?request" value="" type="URI"/>
    			<binding name="?response" value="" type="URI"/>
    			<binding name="?value" value="" type="literal"/>
    		</forcedBindings>
      		<![CDATA[INSERT DATA { 
      		?request iot:hasMPResponse ?response . 
      		?response rdf:type iot:MP-Response . 
      		?response iot:hasMPResponseString ?value }]]>
    	</insert>	
        <insert ID="MN_REQUEST">
        	<forcedBindings>
    			<binding name="?request" value="" type="URI"/>
    			<binding name="?network" value="" type="URI"/>
    			<binding name="?value" value="" type="literal"/>
    		</forcedBindings>
      		<![CDATA[INSERT DATA { 
      		?request rdf:type iot:MN-Request . 
      		?request iot:hasNetwork ?network . 
      		?request iot:hasMNRequestString ?value }]]>
    	</insert>
        <insert ID="RESOURCE_RESPONSE">
        	<forcedBindings>
    			<binding name="?response" value="" type="URI"/>
    			<binding name="?action" value="" type="URI"/>
    			<binding name="?resource" value="" type="URI"/>
    			<binding name="?value" value="" type="literal"/>
    		</forcedBindings>
      		<![CDATA[INSERT DATA { 
      		?response rdf:type iot:Resource-Response . 
      		?response iot:hasAction ?action . 
      		?response iot:hasResource ?resource . 
      		?response iot:hasValue ?value }]]>
   		 </insert>
    	<insert ID="RESOURCE_REQUEST">
	    	<forcedBindings>
	    		<binding name="?action" value="" type="URI"/>
	    		<binding name="?request" value="" type="URI"/>
	    		<binding name="?resource" value="" type="URI"/>
	    		<binding name="?value" value="" type="literal"/>
	    	</forcedBindings>
      		<![CDATA[INSERT DATA { 
      		?request rdf:type iot:Resource-Request . 
      		?request iot:hasValue ?value . 
      		?request iot:hasAction ?action . 
      		?request iot:hasResource ?resource }]]>
    	</insert>
    </inserts>
  	<subscribes>
    	<subscribe ID="MP_RESPONSE">
      		<![CDATA[SELECT ?request ?value ?protocol WHERE { 
      		?response rdf:type iot:MP-Response . 
      		?request iot:hasMPResponse ?response . 
      		?response iot:hasMPResponseString ?value . 
      		?request iot:hasProtocol ?protocol }]]>
    	</subscribe>
      	<subscribe ID="MN_REQUEST">
      		<![CDATA[SELECT ?request ?value ?network WHERE { 
      		?request rdf:type iot:MN-Request . 
      		?request iot:hasNetwork ?network . 
      		?request iot:hasMNRequestString ?value }]]>
    	</subscribe>
      	<subscribe ID="MN_MAPPING">
      		<![CDATA[SELECT ?mapping ?network ?requestPattern ?responsePattern ?resource ?action ?value WHERE { 
      		?mapping rdf:type iot:MN-Mapping . 
      		?mapping iot:hasNetwork ?network . 
      		?mapping iot:hasResource ?resource . 
      		?mapping iot:hasAction ?action . 
      		?mapping iot:hasValue ?value . 
      		?mapping iot:hasMNRequestPattern ?requestPattern . 
      		?mapping iot:hasMNResponsePattern ?responsePattern }
      		]]>
    	</subscribe>
    	<subscribe ID="MP_MAPPING">
      		<![CDATA[SELECT ?mapping ?protocol ?requestPattern ?responsePattern ?resource ?action ?value WHERE { 
      		?mapping rdf:type iot:MP-Mapping . 
      		?mapping iot:hasProtocol ?protocol . 
      		?mapping iot:hasResource ?resource . 
      		?mapping iot:hasAction ?action . 
      		?mapping iot:hasValue ?value . 
      		?mapping iot:hasMPRequestPattern ?requestPattern . 
      		?mapping iot:hasMPResponsePattern ?responsePattern }]]>
    	</subscribe>
    	<subscribe ID="MP_REQUEST">
    		<![CDATA[SELECT ?request ?protocol ?value WHERE { 
    		?request rdf:type iot:MP-Request . 
    		?request iot:hasProtocol ?protocol . 
    		?request iot:hasMPRequestString ?value }]]>
    	</subscribe>
	    <subscribe ID="RESOURCE_RESPONSE">
	      <![CDATA[SELECT ?response ?action ?resource ?value WHERE { 
	      ?response rdf:type iot:Resource-Response . 
	      ?response iot:hasAction ?action . 
	      ?response iot:hasResource ?resource . 
	      ?response iot:hasValue ?value }]]>
	    </subscribe>
		<subscribe ID="RESOURCE_REQUEST">
	    	<![CDATA[SELECT ?request ?value ?action ?resource WHERE { 
	    	?request rdf:type iot:Resource-Request . 
	    	?request iot:hasValue ?value . 
	    	?request iot:hasAction ?action . 
	    	?request iot:hasResource ?resource }]]>
	    </subscribe>
	    <subscribe ID="MN_RESPONSE">
	      <![CDATA[SELECT ?network ?value WHERE { 
	      ?response rdf:type iot:MN-Response . 
	      ?response iot:hasNetwork ?network . 
	      ?response iot:hasMNResponseString ?value }]]>
	    </subscribe>
	    <subscribe ID="RESOURCE_PENDING_REQUEST">
	      <![CDATA[SELECT ?request ?resource ?action ?value WHERE { 
	      ?request rdf:type iot:Resource-Pending-Request . 
	      ?request iot:hasValue ?value . 
	      ?request iot:hasAction ?action . 
	      ?request iot:hasResource ?resource }]]>
	    </subscribe>
	    <subscribe ID="MN_RESPONSE">
	    <![CDATA[SELECT ?response ?network ?value WHERE { 
	    ?response rdf:type iot:MN-Response . 
      	?response iot:hasNetwork ?network . 
      	?response iot:hasMNResponseString ?value }]]></subscribe>
      	<subscribe ID="ALL"><![CDATA[SELECT ?s ?p ?o WHERE { ?s ?p ?o }]]></subscribe>
  	</subscribes>
  	<updates>
  		<forcedBindings>
   			<binding name="?resource" value="" type="URI"/>
   			<binding name="?value" value="" type="literal"/>
    	</forcedBindings>
  		<update ID="RESOURCE">
  		<![CDATA[]]> 
  		DELETE DATA { ?resource iot:hasValue ?oldValue }
  		INSERT DATA { ?resource iot:hasValue ?value }
  		WHERE { OPTIONAL { ?resource iot:hasValue ?oldValue } . ?resource rdf:type iot:Resource }</update>
  	</updates>
</ApplicationProfile>